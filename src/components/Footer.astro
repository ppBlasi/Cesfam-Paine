<footer class="mt-auto w-full bg-gradient-to-b from-[#1b0f2b] via-[#200934] to-[#12061f] text-white shadow-inner">
  <div class="mx-auto flex max-w-6xl flex-col gap-10 px-4 py-10 lg:px-6">
    <div class="grid gap-8 md:grid-cols-[1.05fr_1.35fr_0.9fr]">

      <div class="space-y-4">
        <p class="text-xs font-semibold uppercase tracking-[0.35em] text-white/60">Contacto</p>
        <h2 class="text-2xl font-semibold leading-tight md:text-3xl">CESFAM Dr. Miguel Solar</h2>
        <ul class="space-y-2 text-sm text-white/80">
          <li><span class="font-semibold text-white">Dirección:</span> CESFAM Dr. Miguel Solar</li>
          <li><span class="font-semibold text-white">Teléfono:</span> 800 000 138</li>
          <li><span class="font-semibold text-white">Correo:</span> cesfam@paine.cl</li>
          <li><span class="font-semibold text-white">Horario general:</span> Lun a Vie 08:00–19:30, Sáb 08:00–12:30</li>
        </ul>

        <div class="flex flex-wrap gap-3 pt-2 text-sm">
          <a href="tel:800000138"
             class="rounded-full border border-white/20 px-4 py-2 font-semibold text-white transition hover:border-white hover:bg-white/10">
            Llamar ahora
          </a>
          <a href="mailto:cesfam@paine.cl"
             class="rounded-full bg-white/15 px-4 py-2 font-semibold text-white transition hover:bg-white/25">
            Escribir correo
          </a>
        </div>
      </div>

      <div class="rounded-3xl border border-white/10 bg-white/5 p-5 backdrop-blur">
        <p class="text-xs font-semibold uppercase tracking-[0.35em] text-white/60">Dónde estamos</p>
        <p class="mt-2 text-lg font-semibold">Visítanos en Paine</p>
        <p class="text-sm text-white/70">Haz clic en el mapa para cargar la versión interactiva.</p>

        <div class="mt-4 overflow-hidden rounded-2xl border border-white/10 shadow-lg relative">
          <button id="map-load-btn" type="button" class="group block w-full cursor-pointer">
            <img id="map-preview"
                 src="https://maps.googleapis.com/maps/api/staticmap?center=-33.80482108500673,-70.74123299272878&zoom=17&size=640x380&scale=2&markers=color:red%7C-33.80482108500673,-70.74123299272878&key=AIzaSyB5qomquPBUFCWQ59fCbypase_7odrJU_s"
                 alt="Mapa — CESFAM Dr. Miguel Solar"
                 class="h-64 w-full object-cover"
                 loading="lazy" />
          </button>

          <div id="map" class="hidden h-64 w-full" role="region"></div>

          <span class="absolute bottom-3 left-3 inline-flex items-center gap-2 rounded-md bg-black/50 px-3 py-1 text-sm font-semibold text-white/90 group-hover:bg-black/60">
            Cargar mapa →
          </span>
        </div>

        <noscript>
          <div class="mt-4 overflow-hidden rounded-2xl border border-white/10 shadow-lg">
            <img src="/maps.png" class="h-64 w-full object-cover" />
          </div>
        </noscript>

        <a href="https://www.google.com/maps/search/?api=1&query=CESFAM+Dr.+Miguel+Solar"
           target="_blank"
           rel="noopener noreferrer"
           class="mt-4 inline-flex items-center gap-2 text-sm font-semibold text-white transition hover:text-emerald-200">
          Abrir en Google Maps →
        </a>

        <script>
          document.addEventListener("DOMContentLoaded", () => {
            const LAT = -33.80482108500673;
            const LON = -70.74123299272878;
            const ZOOM = 17;

            const previewImg = document.getElementById("map-preview");
            const mapEl = document.getElementById("map");
            const loadBtn = document.getElementById("map-load-btn");

            function initMapInternal() {
              mapEl.classList.remove("hidden");

              if (!window.google || !window.google.maps) {
                previewImg.classList.remove("hidden");
                mapEl.classList.add("hidden");
                return;
              }

              const center = { lat: LAT, lng: LON };
              const map = new google.maps.Map(mapEl, {
                center,
                zoom: ZOOM,
                gestureHandling: "greedy",
                zoomControl: true,
                mapTypeControl: false,
                streetViewControl: false,
              });

              new google.maps.Marker({
                position: center,
                map,
                title: "CESFAM Dr. Miguel Solar",
              });
            }

            window.initMap = initMapInternal;

            function loadGoogleMapsScript() {
              if (window.google && window.google.maps) return initMapInternal();

              const script = document.createElement("script");
              script.id = "gmaps-script";
              script.src = `https://maps.googleapis.com/maps/api/js?key=AIzaSyB5qomquPBUFCWQ59fCbypase_7odrJU_s&callback=initMap`;
              script.async = true;
              script.defer = true;

              script.onerror = () => {
                previewImg.classList.remove("hidden");
                mapEl.classList.add("hidden");
              };

              document.body.appendChild(script);
            }

            function showMap() {
              previewImg.classList.add("hidden");
              loadGoogleMapsScript();
            }

            loadBtn.addEventListener("click", showMap);
          });
        </script>
      </div>

      <div class="rounded-3xl border border-white/10 bg-white/5 p-5 backdrop-blur">
        <p class="text-xs font-semibold uppercase tracking-[0.35em] text-white/60">Vacunación</p>
        <p class="mt-2 text-lg font-semibold">Campañas activas</p>
        <p class="text-sm text-white/70">Haz clic en la imagen para ampliarla.</p>

        <div class="mt-4 overflow-hidden rounded-2xl border border-white/10 shadow-lg">
          <img id="vaccine-img"
               src="/index/sara.jpg"
               alt="Campaña de vacunación"
               class="h-64 w-full object-cover cursor-pointer"
               loading="lazy" />
        </div>

        <ul class="mt-4 space-y-2 text-sm text-white/80">
          <li>- Influenza</li>
          <li>- Sarampión</li>
          <li>- Neumo 23</li>
        </ul>
      </div>
    </div>

    <div class="border-t border-white/10 pt-6 text-center text-xs text-white/60">
      © {new Date().getFullYear()} CESFAM Dr. Miguel Solar. Todos los derechos reservados.
    </div>
  </div>
</footer>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const img = document.getElementById("vaccine-img");

    img.addEventListener("click", () => {
      const modal = document.createElement("div");
      modal.className = "fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4";
      modal.innerHTML = `
        <img src="${img.src}" class="max-w-full max-h-full rounded-xl shadow-2xl" />
      `;
      modal.addEventListener("click", () => modal.remove());
      document.body.appendChild(modal);
    });
  });
</script>

<style is:global>
  body {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    background-color: #f8f6ff;
  }
  body > footer {
    margin-top: auto;
  }
</style>
